<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generar PDF</title>

</head>
<body>
    <h1>Crear Archivos PDF</h1>
    <br>
    
    <input type="text" placeholder="Escribeme" id="textoEscrito"><br><br>
    <input type="date" id="fecha">

    <a href="javascript:genPDF()">Crear pdf</a>
    
    <div id="output"></div>

    <script type="text/javascript" src="jspdf.min.js"></script>
    <script type="text/javascript">

        
function genPDF() {
        var doc = new jsPDF();

        // Obtener el mensaje del elemento con ID 'textoEscrito'
        let mensaje = document.getElementById('textoEscrito').value;

        // Obtener la fecha seleccionada del elemento con ID 'fecha'
        let fechaSeleccionada = document.getElementById('fecha').value;
        if (!fechaSeleccionada) {
            alert("Por favor, selecciona una fecha.");
            return;
        }
        // Formatear la fecha seleccionada (yyyy-mm-dd a dd/mm/yyyy)
        let partesFecha = fechaSeleccionada.split('-');
        let fechaFormateada = partesFecha[2] + '/' + partesFecha[1] + '/' + partesFecha[0];

        // Añadir el mensaje y la fecha al PDF
        doc.text(20, 20, mensaje);
        doc.text(20, 30, 'Fecha: ' + fechaFormateada);

        // Añadir una nueva página y un mensaje adicional
        doc.addPage();
        doc.text(20, 20, 'Mi trabajo!!');
        
        // Agregar un párrafo al DOM con la información
        let outputDiv = document.getElementById('output');
        let nuevoParrafo = document.createElement('p');
        nuevoParrafo.textContent = `Mensaje: ${mensaje} - Fecha: ${fechaFormateada}`;
        outputDiv.appendChild(nuevoParrafo);

        // Guardar el PDF
        doc.save('Test.pdf');

    }
    </script>
</body>
</html>