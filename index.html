<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Generar PDF</title>
    </head>
    <body>
        <h1>Crear Archivos PDF</h1>
        <br />

        <input
            type="text"
            placeholder="Escribeme"
            id="textoEscrito"
        /><br /><br />
        <input type="date" id="fecha" />

        <a href="javascript:genPDF()">Crear pdf</a>

        <div id="output"></div>
        <a href="grifosTest.html">Ir a la Página 2</a>








        <h2>Seleccione las actividades</h2>
        <div>
            <input type="checkbox" id="faena" onclick="toggleHorario('faena', 'FAENA')"> FAENA<br>
            <input type="checkbox" id="despostada" onclick="toggleHorario('despostada', 'DESPOSTADA')"> DESPOSTADA<br>
            <input type="checkbox" id="cuarteo" onclick="toggleHorario('cuarteo', 'CUARTEO')"> CUARTEO<br>
            <input type="checkbox" id="saladero" onclick="toggleHorario('saladero', 'SALADERO')"> SALADERO<br>
        </div>
        
        <div id="horarios"></div>
        
        <h2>Lista de Actividades</h2>
        <ul id="lista-actividades"></ul>
        
        <script type="text/javascript">
            function generateHourOptions() {
                let options = '';
                for (let i = 0; i < 24; i++) {
                    options += `<option value="${i.toString().padStart(2, '0')}">${i.toString().padStart(2, '0')}</option>`;
                }
                return options;
            }
        
            function generateMinuteOptions() {
                let options = '';
                for (let i = 0; i < 60; i += 5) { // Incremento de 5 minutos
                    options += `<option value="${i.toString().padStart(2, '0')}">${i.toString().padStart(2, '0')}</option>`;
                }
                return options;
            }
        
            function toggleHorario(id, name) {
                const checkbox = document.getElementById(id);
                const container = document.getElementById('horarios');
                
                if (checkbox.checked) {
                    const div = document.createElement('div');
                    div.className = 'horario';
                    div.id = `horario-${id}`;
                    div.innerHTML = `
                        <h3>${name}</h3>
                        <label for="inicio-${id}">Hora de Inicio:</label>
                        <select id="inicio-${id}">${generateHourOptions()}</select>:<select id="inicio-min-${id}">${generateMinuteOptions()}</select>
                        <br>
                        <label for="fin-${id}">Hora de Finalización:</label>
                        <select id="fin-${id}">${generateHourOptions()}</select>:<select id="fin-min-${id}">${generateMinuteOptions()}</select>
                        <br>
                        <button onclick="agregarActividad('${name}', 'inicio-${id}', 'inicio-min-${id}', 'fin-${id}', 'fin-min-${id}')">Agregar a la Lista</button>
                    `;
                    container.appendChild(div);
                } else {
                    const div = document.getElementById(`horario-${id}`);
                    if (div) {
                        container.removeChild(div);
                    }
                }
            }
        
            function agregarActividad(name, inicioId, inicioMinId, finId, finMinId) {
                const inicioHora = document.getElementById(inicioId).value;
                const inicioMin = document.getElementById(inicioMinId).value;
                const finHora = document.getElementById(finId).value;
                const finMin = document.getElementById(finMinId).value;
        
                const lista = document.getElementById('lista-actividades');
                const li = document.createElement('li');
                li.textContent = `${name}: De ${inicioHora}:${inicioMin} a ${finHora}:${finMin}`;
                lista.appendChild(li);
            }
        </script>








        <script type="text/javascript" src="jspdf.min.js"></script>
        <script type="text/javascript">
            function genPDF() {
                var doc = new jsPDF();

                // Obtener el mensaje del elemento con ID 'textoEscrito'
                let mensaje = document.getElementById("textoEscrito").value;

                // Obtener la fecha seleccionada del elemento con ID 'fecha'
                let fechaSeleccionada = document.getElementById("fecha").value;
                if (!fechaSeleccionada) {
                    alert("Por favor, selecciona una fecha.");
                    return;
                }
                // Formatear la fecha seleccionada (yyyy-mm-dd a dd/mm/yyyy)
                let partesFecha = fechaSeleccionada.split("-");
                let fechaFormateada =
                    partesFecha[2] +
                    "/" +
                    partesFecha[1] +
                    "/" +
                    partesFecha[0];

                //Generar numero del 0 al 11 y luego lo pasamos a minutos
                let max = 11;
                let randomInt = Math.floor(Math.random() * max);
                let minutosRandom = randomInt * 5;
                console.log(minutosRandom);

                //Generar numero para las horas
                let min = 7;
                max = 15;
                randomInt = Math.floor(Math.random() * (max - min) + min);
                let horasRandom = randomInt * 5;
                console.log(horasRandom);

                let horarioGenerado = horasRandom + ":" + minutosRandom;
                console.log(horarioGenerado);

                // Añadir el mensaje y la fecha al PDF
                doc.text(20, 20, "Fecha: " + fechaFormateada);
                doc.text(20, 30, mensaje);
                doc.text(20, 40, mensaje);

                // Añadir una nueva página y un mensaje adicional
                doc.addPage();
                doc.text(20, 20, "Mi trabajo!!");

                // Agregar un párrafo al DOM con la información
                let outputDiv = document.getElementById("output");
                let nuevoParrafo = document.createElement("p");
                nuevoParrafo.textContent = `Mensaje: ${mensaje} - Fecha: ${fechaFormateada} - Horario ${horarioGenerado}`;
                outputDiv.appendChild(nuevoParrafo);

                // Guardar el PDF
                doc.save("Test.pdf");
            }
        </script>
    </body>
</html>

